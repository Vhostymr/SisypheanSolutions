@model string

<div id="file-download" class="container">
    <h2>File Download <br />
        <small>
            It appears you are trying to download a file that has been encrypted. <br /> 
            Please provide the password for the file to decrypt and download.
        </small>
    </h2>
    <div class="row">
        <div class="col-sm-6">
            @using (Html.BeginForm("FileDownload", "File", FormMethod.Post, new { @id="file-form" }))
            {
                <input id="file" name="uniqueID" type="hidden" value="@Model"/>
                <input id="password" name="password" type="password" class="form-control" placeholder="Password" /><br />

                <input id="submit-button" type="button" class="btn btn-primary" value="Download" />
            }
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#submit-button').on('click', function () {
            var url = '/File/ValidateDownload';
            
            $.post(url, { uniqueID: $('#file').val(), password: $('#password').val() }, function (data) {
                if (data.success) {
                    $('#file-form').submit();
                }

                else {
                    var i;
                    for (i = 0; i < data.errors.length; i++) {
                        alertify.error(data.errors[i]);
                    }
                }
            });
        });
    });
</script>